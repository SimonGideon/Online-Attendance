<%= stylesheet_link_tag "dashboard", media: "all" %>
<div class="main-container container-fluid">
  <div class="row">
    <div class="col-md-auto nav-container">
      <!-- Sidebar -->
      <%= render partial: "shared/studentsidebar", locals: { student_id: params[:student_id] } %>
    </div>
    <div class="col-lg-auto body-container">
      <!-- Course Overview -->
      <div class=" mb-4">
        <div class="overview-body">
          <div class="card">
            <div class="ic-content">
              <i class="fas fa-user-graduate i-1"></i>
              <div class="dash-more">
                <p class="card-description">Total Courses</p>
                <p class="dash-item"><%= @students_courses.size %></p>
              </div>
            </div>
            <div class="card-footer">
              <i class="far fa-clock"></i>
              <span>update now</span>
            </div>
          </div>
          <div class="card">
            <div class="ic-content">
              <i class="fas fa-book-reader i-2"></i>
              <div class="dash-more">
                <p class="card-description">Registered Units</p>
                <p class="dash-item"><%= @students_courses.map(&:lecturer_unit).uniq.size %></p>
              </div>
            </div>
            <div class="card-footer">
              <i class="far fa-calendar"></i>
              <span>Updated now</span>
            </div>
          </div>
          <div class="card">
  <div class="ic-content">
    <i class="fas fa-chalkboard-teacher i-3"></i>
    <div class="dash-more">
      <p class="card-description">Attendance</p>
      <% if @attendance_percentage %>
        <p class="dash-item">
          <%= @attendance_percentage %>
          <span>%</span>
        </p>
      <% else %>
        <p class="dash-item">
          No attendance data available
        </p>
      <% end %>
    </div>
  </div>
  <div class="card-footer">
    <i class="fas fa-sync-alt"></i>
    <span>Refresh now</span>
  </div>
</div>

        </div>
      </div>
      <!-- Your Courses -->
      <div class="card mb-4 course-sam">
  <div class="card-body">
    <h2 class="card-title mb-4">Your Courses</h2>
    <ul class="list-group mb-4">
      <% @students_courses.each do |students_course| %>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <h5 class="mb-1"><%= students_course.lecturer_unit.course.course_name %></h5>
          <span class="badge bg-primary rounded-pill">Details</span>
        </li>
      <% end %>
    </ul>
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        <li class="page-item">
          <a class="page-link" href="#" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <!-- Add more page links as needed -->
        <li class="page-item">
          <a class="page-link" href="#" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>

      <!-- Attendance Summary -->
      <div class="card mb-4 course-sam">
    <div class="card-body">
        <h2 class="card-title">Attendance Summary</h2>
        <div class="table-responsive bg-white p-3">
    <table class="table table-bordered bg-light " id="attendanceTable" >
        <thead>
            <tr>
                <th>Course</th>
                <th class="sieze">Attendance Date</th>
                <th>Present</th>
            </tr>
        </thead>
        <tbody>
            <% @attendances.each do |attendance| %>
                <tr>
                    <td><%= attendance.students_course.lecturer_unit.course.course_name %></td>
                    <td class="sieze"><%= attendance.attendance_date %></td>
                    <td>
  <span class="table-span <%= attendance.present ? 'bg-success' : 'bg-danger' %>">
    <%= attendance.present ? "Yes" : "No" %>
  </span>
</td>

                </tr>
            <% end %>
        </tbody>
    </table>
</div>

    </div>
</div>
</style>

<script>
    $(document).ready(function() {
        $('#attendanceTable').DataTable({
        lengthChange: true,
        lengthMenu: [5, 10, 25, 50, 100],
        "bDestroy": true
        });
    });
</script>

    </div>
  </div>
</div>
